//     Zepto.js
//     (c) 2010-2014 Thomas Fuchs
//     Zepto.js may be freely distributed under the MIT license.

// MIT license

define("zepto",[],function(){var e=function(){function M(e){return e==null?String(e):x[T.call(e)]||"object"}function _(e){return M(e)=="function"}function D(e){return e!=null&&e==e.window}function P(e){return e!=null&&e.nodeType==e.DOCUMENT_NODE}function H(e){return M(e)=="object"}function B(e){return H(e)&&!D(e)&&Object.getPrototypeOf(e)==Object.prototype}function j(e){return typeof e.length=="number"}function F(e){return o.call(e,function(e){return e!=null})}function I(e){return e.length>0?n.fn.concat.apply([],e):e}function q(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function R(e){return e in f?f[e]:f[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function U(e,t){return typeof t=="number"&&!l[q(e)]?t+"px":t}function z(e){var t,n;return a[e]||(t=u.createElement(e),u.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),n=="none"&&(n="block"),a[e]=n),a[e]}function W(e){return"children"in e?s.call(e.children):n.map(e.childNodes,function(e){if(e.nodeType==1)return e})}function X(n,r,i){for(t in r)i&&(B(r[t])||O(r[t]))?(B(r[t])&&!B(n[t])&&(n[t]={}),O(r[t])&&!O(n[t])&&(n[t]=[]),X(n[t],r[t],i)):r[t]!==e&&(n[t]=r[t])}function V(e,t){return t==null?n(e):n(e).filter(t)}function $(e,t,n,r){return _(t)?t.call(e,n,r):t}function J(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function K(t,n){var r=t.className,i=r&&r.baseVal!==e;if(n===e)return i?r.baseVal:r;i?r.baseVal=n:t.className=n}function Q(e){var t;try{return e?e=="true"||(e=="false"?!1:e=="null"?null:!/^0/.test(e)&&!isNaN(t=Number(e))?t:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(r){return e}}function G(e,t){t(e);for(var n in e.childNodes)G(e.childNodes[n],t)}var e,t,n,r,i=[],s=i.slice,o=i.filter,u=window.document,a={},f={},l={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},c=/^\s*<(\w+|!)[^>]*>/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/^(?:body|html)$/i,v=/([A-Z])/g,m=["val","css","html","text","data","width","height","offset"],g=["after","prepend","before","append"],y=u.createElement("table"),b=u.createElement("tr"),w={tr:u.createElement("tbody"),tbody:y,thead:y,tfoot:y,td:b,th:b,"*":u.createElement("div")},E=/complete|loaded|interactive/,S=/^[\w-]*$/,x={},T=x.toString,N={},C,k,L=u.createElement("div"),A={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},O=Array.isArray||function(e){return e instanceof Array};return N.matches=function(e,t){if(!t||!e||e.nodeType!==1)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,s=!i;return s&&(i=L).appendChild(e),r=~N.qsa(i,t).indexOf(e),s&&L.removeChild(e),r},C=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},k=function(e){return o.call(e,function(t,n){return e.indexOf(t)==n})},N.fragment=function(t,r,i){var o,a,f;return h.test(t)&&(o=n(u.createElement(RegExp.$1))),o||(t.replace&&(t=t.replace(p,"<$1></$2>")),r===e&&(r=c.test(t)&&RegExp.$1),r in w||(r="*"),f=w[r],f.innerHTML=""+t,o=n.each(s.call(f.childNodes),function(){f.removeChild(this)})),B(i)&&(a=n(o),n.each(i,function(e,t){m.indexOf(e)>-1?a[e](t):a.attr(e,t)})),o},N.Z=function(e,t){return e=e||[],e.__proto__=n.fn,e.selector=t||"",e},N.isZ=function(e){return e instanceof N.Z},N.init=function(t,r){var i;if(!t)return N.Z();if(typeof t=="string"){t=t.trim();if(t[0]=="<"&&c.test(t))i=N.fragment(t,RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=N.qsa(u,t)}}else{if(_(t))return n(u).ready(t);if(N.isZ(t))return t;if(O(t))i=F(t);else if(H(t))i=[t],t=null;else if(c.test(t))i=N.fragment(t.trim(),RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=N.qsa(u,t)}}return N.Z(i,t)},n=function(e,t){return N.init(e,t)},n.extend=function(e){var t,n=s.call(arguments,1);return typeof e=="boolean"&&(t=e,e=n.shift()),n.forEach(function(n){X(e,n,t)}),e},N.qsa=function(e,t){var n,r=t[0]=="#",i=!r&&t[0]==".",o=r||i?t.slice(1):t,u=S.test(o);return P(e)&&u&&r?(n=e.getElementById(o))?[n]:[]:e.nodeType!==1&&e.nodeType!==9?[]:s.call(u&&!r?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=function(e,t){return e!==t&&e.contains(t)},n.type=M,n.isFunction=_,n.isWindow=D,n.isArray=O,n.isPlainObject=B,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.inArray=function(e,t,n){return i.indexOf.call(t,e,n)},n.camelCase=C,n.trim=function(e){return e==null?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.map=function(e,t){var n,r=[],i,s;if(j(e))for(i=0;i<e.length;i++)n=t(e[i],i),n!=null&&r.push(n);else for(s in e)n=t(e[s],s),n!=null&&r.push(n);return I(r)},n.each=function(e,t){var n,r;if(j(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},n.grep=function(e,t){return o.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){x["[object "+t+"]"]=t.toLowerCase()}),n.fn={forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,indexOf:i.indexOf,concat:i.concat,map:function(e){return n(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return n(s.apply(this,arguments))},ready:function(e){return E.test(u.readyState)&&u.body?e(n):u.addEventListener("DOMContentLoaded",function(){e(n)},!1),this},get:function(t){return t===e?s.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(e){return i.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return _(e)?this.not(this.not(e)):n(o.call(this,function(t){return N.matches(t,e)}))},add:function(e,t){return n(k(this.concat(n(e,t))))},is:function(e){return this.length>0&&N.matches(this[0],e)},not:function(t){var r=[];if(_(t)&&t.call!==e)this.each(function(e){t.call(this,e)||r.push(this)});else{var i=typeof t=="string"?this.filter(t):j(t)&&_(t.item)?s.call(t):n(t);this.forEach(function(e){i.indexOf(e)<0&&r.push(e)})}return n(r)},has:function(e){return this.filter(function(){return H(e)?n.contains(this,e):n(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!H(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!H(e)?e:n(e)},find:function(e){var t,r=this;return typeof e=="object"?t=n(e).filter(function(){var e=this;return i.some.call(r,function(t){return n.contains(t,e)})}):this.length==1?t=n(N.qsa(this[0],e)):t=this.map(function(){return N.qsa(this,e)}),t},closest:function(e,t){var r=this[0],i=!1;typeof e=="object"&&(i=n(e));while(r&&!(i?i.indexOf(r)>=0:N.matches(r,e)))r=r!==t&&!P(r)&&r.parentNode;return n(r)},parents:function(e){var t=[],r=this;while(r.length>0)r=n.map(r,function(e){if((e=e.parentNode)&&!P(e)&&t.indexOf(e)<0)return t.push(e),e});return V(t,e)},parent:function(e){return V(k(this.pluck("parentNode")),e)},children:function(e){return V(this.map(function(){return W(this)}),e)},contents:function(){return this.map(function(){return s.call(this.childNodes)})},siblings:function(e){return V(this.map(function(e,t){return o.call(W(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return n.map(this,function(t){return t[e]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=z(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=_(e);if(this[0]&&!t)var r=n(e).get(0),i=r.parentNode||this.length>1;return this.each(function(s){n(this).wrapAll(t?e.call(this,s):i?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){n(this[0]).before(e=n(e));var t;while((t=e.children()).length)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=_(e);return this.each(function(r){var i=n(this),s=i.contents(),o=t?e.call(this,r):e;s.length?s.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var r=n(this);(t===e?r.css("display")=="none":t)?r.show():r.hide()})},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(t){var r=this.innerHTML;n(this).empty().append($(this,e,t,r))})},text:function(t){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t===e?"":""+t})},attr:function(n,r){var i;return typeof n=="string"&&r===e?this.length==0||this[0].nodeType!==1?e:n=="value"&&this[0].nodeName=="INPUT"?this.val():!(i=this[0].getAttribute(n))&&n in this[0]?this[0][n]:i:this.each(function(e){if(this.nodeType!==1)return;if(H(n))for(t in n)J(this,t,n[t]);else J(this,n,$(this,r,e,this.getAttribute(n)))})},removeAttr:function(e){return this.each(function(){this.nodeType===1&&J(this,e)})},prop:function(t,n){return t=A[t]||t,n===e?this[0]&&this[0][t]:this.each(function(e){this[t]=$(this,n,e,this[t])})},data:function(t,n){var r=this.attr("data-"+t.replace(v,"-$1").toLowerCase(),n);return r!==null?Q(r):e},val:function(e){return arguments.length===0?this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(t){this.value=$(this,e,t,this.value)})},offset:function(e){if(e)return this.each(function(t){var r=n(this),i=$(this,e,t,r.offset()),s=r.offsetParent().offset(),o={top:i.top-s.top,left:i.left-s.left};r.css("position")=="static"&&(o.position="relative"),r.css(o)});if(this.length==0)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,r){if(arguments.length<2){var i=this[0],s=getComputedStyle(i,"");if(!i)return;if(typeof e=="string")return i.style[C(e)]||s.getPropertyValue(e);if(O(e)){var o={};return n.each(O(e)?e:[e],function(e,t){o[t]=i.style[C(t)]||s.getPropertyValue(t)}),o}}var u="";if(M(e)=="string")!r&&r!==0?this.each(function(){this.style.removeProperty(q(e))}):u=q(e)+":"+U(e,r);else for(t in e)!e[t]&&e[t]!==0?this.each(function(){this.style.removeProperty(q(t))}):u+=q(t)+":"+U(t,e[t])+";";return this.each(function(){this.style.cssText+=";"+u})},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?i.some.call(this,function(e){return this.test(K(e))},R(e)):!1},addClass:function(e){return e?this.each(function(t){r=[];var i=K(this),s=$(this,e,t,i);s.split(/\s+/g).forEach(function(e){n(this).hasClass(e)||r.push(e)},this),r.length&&K(this,i+(i?" ":"")+r.join(" "))}):this},removeClass:function(t){return this.each(function(n){if(t===e)return K(this,"");r=K(this),$(this,t,n,r).split(/\s+/g).forEach(function(e){r=r.replace(R(e)," ")}),K(this,r.trim())})},toggleClass:function(t,r){return t?this.each(function(i){var s=n(this),o=$(this,t,i,K(this));o.split(/\s+/g).forEach(function(t){(r===e?!s.hasClass(t):r)?s.addClass(t):s.removeClass(t)})}):this},scrollTop:function(t){if(!this.length)return;var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})},scrollLeft:function(t){if(!this.length)return;var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})},position:function(){if(!this.length)return;var e=this[0],t=this.offsetParent(),r=this.offset(),i=d.test(t[0].nodeName)?{top:0,left:0}:t.offset();return r.top-=parseFloat(n(e).css("margin-top"))||0,r.left-=parseFloat(n(e).css("margin-left"))||0,i.top+=parseFloat(n(t[0]).css("border-top-width"))||0,i.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:r.top-i.top,left:r.left-i.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u.body;while(e&&!d.test(e.nodeName)&&n(e).css("position")=="static")e=e.offsetParent;return e})}},n.fn.detach=n.fn.remove,["width","height"].forEach(function(t){var r=t.replace(/./,function(e){return e[0].toUpperCase()});n.fn[t]=function(i){var s,o=this[0];return i===e?D(o)?o["inner"+r]:P(o)?o.documentElement["scroll"+r]:(s=this.offset())&&s[t]:this.each(function(e){o=n(this),o.css(t,$(this,i,e,o[t]()))})}}),g.forEach(function(e,t){var r=t%2;n.fn[e]=function(){var e,i=n.map(arguments,function(t){return e=M(t),e=="object"||e=="array"||t==null?t:N.fragment(t)}),s,o=this.length>1;return i.length<1?this:this.each(function(e,u){s=r?u:u.parentNode,u=t==0?u.nextSibling:t==1?u.firstChild:t==2?u:null,i.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!s)return n(e).remove();G(s.insertBefore(e,u),function(e){e.nodeName!=null&&e.nodeName.toUpperCase()==="SCRIPT"&&(!e.type||e.type==="text/javascript")&&!e.src&&window.eval.call(window,e.innerHTML)})})})},n.fn[r?e+"To":"insert"+(t?"Before":"After")]=function(t){return n(t)[e](this),this}}),N.Z.prototype=n.fn,N.uniq=k,N.deserializeValue=Q,n.zepto=N,n}();window.Zepto=e,window.$===undefined&&(window.$=e)}),define("os",["./zepto"],function(){function t(t){var n=(""+((new RegExp(t+"(\\d+((\\.|_)\\d+)*)")).exec(e)||[,0])[1]).replace(/_/g,".");return parseFloat(n)||undefined}var e=navigator.userAgent.toLowerCase();$.os={ios:t("os "),android:t("android[/ ]")}}),define("event",["./zepto"],function(){(function(e){function c(e){return e._zid||(e._zid=t++)}function h(e,t,n,r){t=p(t);if(t.ns)var i=d(t.ns);return(o[c(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||c(e.fn)===c(n))&&(!r||e.sel==r)})}function p(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function d(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function v(e,t){return e.del&&!a&&e.e in f||!!t}function m(e){return l[e]||a&&f[e]||e}function g(t,r,i,s,u,a,f){var h=c(t),d=o[h]||(o[h]=[]);r.split(/\s/).forEach(function(r){if(r=="ready")return e(document).ready(i);var o=p(r);o.fn=i,o.sel=u,o.e in l&&(i=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=a;var c=a||i;o.proxy=function(e){e=x(e);if(e.isImmediatePropagationStopped())return;e.data=s;var r=c.apply(t,e._args==n?[e]:[e].concat(e._args));return r===!1&&(e.preventDefault(),e.stopPropagation()),r},o.i=d.length,d.push(o),"addEventListener"in t&&t.addEventListener(m(o.e),o.proxy,v(o,f))})}function y(e,t,n,r,i){var s=c(e);(t||"").split(/\s/).forEach(function(t){h(e,t,n,r).forEach(function(t){delete o[s][t.i],"removeEventListener"in e&&e.removeEventListener(m(t.e),t.proxy,v(t,i))})})}function x(t,r){if(r||!t.isDefaultPrevented){r||(r=t),e.each(S,function(e,n){var i=r[e];t[e]=function(){return this[n]=b,i&&i.apply(r,arguments)},t[n]=w});if(r.defaultPrevented!==n?r.defaultPrevented:"returnValue"in r?r.returnValue===!1:r.getPreventDefault&&r.getPreventDefault())t.isDefaultPrevented=b}return t}function T(e){var t,r={originalEvent:e};for(t in e)!E.test(t)&&e[t]!==n&&(r[t]=e[t]);return x(r,e)}var t=1,n,r=Array.prototype.slice,i=e.isFunction,s=function(e){return typeof e=="string"},o={},u={},a="onfocusin"in window,f={focus:"focusin",blur:"focusout"},l={mouseenter:"mouseover",mouseleave:"mouseout"};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents",e.event={add:g,remove:y},e.proxy=function(t,n){if(i(t)){var r=function(){return t.apply(n,arguments)};return r._zid=c(t),r}if(s(n))return e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var b=function(){return!0},w=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$)/,S={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,o,u,a,f){var l,c,h=this;if(t&&!s(t))return e.each(t,function(e,t){h.on(e,o,u,t,f)}),h;!s(o)&&!i(a)&&a!==!1&&(a=u,u=o,o=n);if(i(u)||u===!1)a=u,u=n;return a===!1&&(a=w),h.each(function(n,i){f&&(l=function(e){return y(i,e.type,a),a.apply(this,arguments)}),o&&(c=function(t){var n,s=e(t.target).closest(o,i).get(0);if(s&&s!==i)return n=e.extend(T(t),{currentTarget:s,liveFired:i}),(l||a).apply(s,[n].concat(r.call(arguments,1)))}),g(i,t,a,u,o,c||l)})},e.fn.off=function(t,r,o){var u=this;return t&&!s(t)?(e.each(t,function(e,t){u.off(e,r,t)}),u):(!s(r)&&!i(o)&&o!==!1&&(o=r,r=n),o===!1&&(o=w),u.each(function(){y(this,t,o,r)}))},e.fn.trigger=function(t,n){return t=s(t)||e.isPlainObject(t)?e.Event(t):x(t),t._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,n){var r,i;return this.each(function(o,u){r=T(s(t)?e.Event(t):t),r._args=n,r.target=u,e.each(h(u,t.type||t),function(e,t){i=t.proxy(r);if(r.isImmediatePropagationStopped())return!1})}),i},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){s(e)||(t=e,e=t.type);var n=document.createEvent(u[e]||"Events"),r=!0;if(t)for(var i in t)i=="bubbles"?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0),x(n)}})(Zepto)}),define("scrollfix",["./os","./event"],function(){function t(){$(".js-no-bounce").on("touchmove",function(e){e.preventDefault()});var e=$(".ui-page"),t=$(".ui-page-content",e);if(!t[0]||!e[0])return;var n;$(document).on("touchstart",".ui-page",function(e){var t=e.currentTarget;n=t.scrollTop,n<=0&&(t.scrollTop=1),n+t.offsetHeight>=t.scrollHeight&&(t.scrollTop=t.scrollHeight-t.offsetHeight-1)}).on("touchmove",".ui-page",function(e){var t=e.currentTarget,n=t.querySelector(".ui-page-content");if(n.offsetHeight<t.clientHeight||n.offsetWidth<t.clientWidth)return e.preventDefault()})}var e=$.os;if(e.ios>=5)t();else{var n=document.documentElement;n.className=n.className+" "+"js-no-overflow-scrolling"}}),define("data",["./zepto"],function(){(function(e){function o(s,o){var a=s[i],f=a&&t[a];if(o===undefined)return f||u(s);if(f){if(o in f)return f[o];var l=r(o);if(l in f)return f[l]}return n.call(e(s),o)}function u(n,s,o){var u=n[i]||(n[i]=++e.uuid),f=t[u]||(t[u]=a(n));return s!==undefined&&(f[r(s)]=o),f}function a(t){var n={};return e.each(t.attributes||s,function(t,i){i.name.indexOf("data-")==0&&(n[r(i.name.replace("data-",""))]=e.zepto.deserializeValue(i.value))}),n}var t={},n=e.fn.data,r=e.camelCase,i=e.expando="Zepto"+ +(new Date),s=[];e.fn.data=function(t,n){return n===undefined?e.isPlainObject(t)?this.each(function(n,r){e.each(t,function(e,t){u(r,e,t)})}):this.length==0?undefined:o(this[0],t):this.each(function(){u(this,t,n)})},e.fn.removeData=function(n){return typeof n=="string"&&(n=n.split(/\s+/)),this.each(function(){var s=this[i],o=s&&t[s];o&&e.each(n||o,function(e){delete o[n?r(this):e]})})},["remove","empty"].forEach(function(t){var n=e.fn[t];e.fn[t]=function(){var e=this.find("*");return t==="remove"&&(e=e.add(this)),e.removeData(),n.call(this)}})})(Zepto)}),define("touch",["./zepto"],function(){(function(e){function a(e,t,n,r){return Math.abs(e-t)>=Math.abs(n-r)?e-t>0?"Left":"Right":n-r>0?"Up":"Down"}function f(){s=null,t.last&&(t.el.trigger("longTap"),t={})}function l(){s&&clearTimeout(s),s=null}function c(){n&&clearTimeout(n),r&&clearTimeout(r),i&&clearTimeout(i),s&&clearTimeout(s),n=r=i=s=null,t={}}function h(e){return(e.pointerType=="touch"||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function p(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var t={},n,r,i,s,o=750,u;e(document).ready(function(){var d,v,m=0,g=0,y,b;"MSGesture"in window&&(u=new MSGesture,u.target=document.body),e(document).bind("MSGestureEnd",function(e){var n=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;n&&(t.el.trigger("swipe"),t.el.trigger("swipe"+n))}).on("touchstart MSPointerDown pointerdown",function(r){if((b=p(r,"down"))&&!h(r))return;y=b?r:r.touches[0],r.touches&&r.touches.length===1&&t.x2&&(t.x2=undefined,t.y2=undefined),d=Date.now(),v=d-(t.last||d),t.el=e("tagName"in y.target?y.target:y.target.parentNode),n&&clearTimeout(n),t.x1=y.pageX,t.y1=y.pageY,v>0&&v<=250&&(t.isDoubleTap=!0),t.last=d,s=setTimeout(f,o),u&&b&&u.addPointer(r.pointerId)}).on("touchmove MSPointerMove pointermove",function(e){if((b=p(e,"move"))&&!h(e))return;y=b?e:e.touches[0],l(),t.x2=y.pageX,t.y2=y.pageY,m+=Math.abs(t.x1-t.x2),g+=Math.abs(t.y1-t.y2)}).on("touchend MSPointerUp pointerup",function(s){if((b=p(s,"up"))&&!h(s))return;l(),t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30?i=setTimeout(function(){t.el.trigger("swipe"),t.el.trigger("swipe"+a(t.x1,t.x2,t.y1,t.y2)),t={}},0):"last"in t&&(m<30&&g<30?r=setTimeout(function(){var r=e.Event("tap");r.cancelTouch=c,t.el.trigger(r),t.isDoubleTap?(t.el&&t.el.trigger("doubleTap"),t={}):n=setTimeout(function(){n=null,t.el&&t.el.trigger("singleTap"),t={}},250)},0):t={}),m=g=0}).on("touchcancel MSPointerCancel pointercancel",c),e(window).on("scroll",c)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})})(Zepto)}),define("tab",["./event","./data","./touch"],function(){function r(e){this.element=$(e)}var e="js-active",t="show:tab",n="shown:tab";r.prototype.show=function(){var r=this.element;if(r.hasClass(e)&&r.data("toggle")=="tab")return;var i=r.parent(),s=r.data("target"),o=i.find("."+e)[0],u=$.Event(t,{relatedTarget:o});r.trigger(u);if(u.isDefaultPrevented())return;var a=$(s);this.activate(r,i),this.activate(a,a.parent(),function(){r.trigger({type:n,relatedTarget:o})})},r.prototype.activate=function(t,n,r){var i="zepto-tab-"+Date.now();n.addClass(i);var s=$("."+i+">."+e,n);n.removeClass(i),s.removeClass(e),t.addClass(e),r&&r()},$.Tab=r,$.fn.tab=function(e){return this.each(function(){var t=$(this),n=t.data("tab");n||t.data("tab",n=new r(this)),n.element=$(this),typeof e=="string"&&n[e]()})},$(document).on("tap.tab.data-api",'[data-toggle="tab"]',function(e){e.preventDefault(),$(this).tab("show")})}),define("transition",["./zepto"],function(){function e(){var e=document.createElement("div"),t={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"};for(var n in t)if(e.style[n]!==undefined)return{end:t[n]}}$.fn.emulateTransitionEnd=function(e){var t=!1,n=this;$(this).one($.support.transition.end,function(){t=!0});var r=function(){t||$(n).trigger($.support.transition.end)};return setTimeout(r,e),this},$.support.transition=e()}),define("fixed",["./os","./event"],function(){var e=$.os;$.support.positionFixed=!(e.ios<5),$.fn.emulateFixed=function(e){var t=$(this);return t.attr("isFixed")||$.support.positionFixed?this:this.each(function(){function r(){var e={position:"absolute"};n.left==0&&n.right==0?(e.left=0,e.width="100%"):e.left=isNaN(n.right)?n.left||0:document.body.offsetWidth-t.width()-n.right,n.top===0&&n.bottom===0&&(e.height="100%"),e.top=window.pageYOffset+(isNaN(n.bottom)?n.top||0:window.innerHeight-t.height()-n.bottom),t.css(e)}var t=$(this);t.attr("isFixed",!0);var n=$.extend(t.css(["top","left","bottom","right"]),e||{});$.each(n,function(e,t){n[e]=parseFloat(t)}),r(),$(window).on("scroll.fixed",r),$(window).on("resize.fixed",r)})}}),define("dialog",["./os","./event","./data","./touch","./transition","./fixed"],function(){function a(e,t){this.options=t,this.$element=$(e),this.$backdrop=this.isShown=null}var e=$.os,t="js-show",n="show:dialog",r="shown:dialog",i="hide:dialog",s="hidden:dialog",o="tap";e.ios<5&&(o="click");var u=o+".dismiss.dialog";a.DEFAULTS={backdrop:!0,show:!0,expires:0},a.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},a.prototype.show=function(e){var i=this,s=$.Event(n,{relatedTarget:e});this.$element.trigger(s);if(this.isShown||s.isDefaultPrevented())return;this.isShown=!0,$(document).on("touchmove.dialog",function(e){return e.preventDefault()}),this.$element.on(u,'[data-dismiss="dialog"]',$.proxy(this.hide,this)),this.backdrop(function(){var n=$.support.transition&&i.options.effect;i.$element.parent().length||i.$element.appendTo(document.body),i.$element.show(),n&&($(document.documentElement).addClass("js-effect-"+i.options.effect),i.$element[0].offsetWidth),i.$element.addClass(t).attr("aria-hidden",!1);var s=$.Event(r,{relatedTarget:e});n?i.$element.find(".js-dialog-content").one($.support.transition.end,function(){i.$element.focus().trigger(s)}).emulateTransitionEnd(300):i.$element.focus().trigger(s)}),Number(i.options.expires)>0&&setTimeout($.proxy(i.hide,i),i.options.expires)},a.prototype.hide=function(e){e&&e.preventDefault&&e.preventDefault(),e=$.Event(i),this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=!1,$(document).off("touchmove.dialog"),this.$element.removeClass(t).attr("aria-hidden",!0).off(u),$.support.transition&&this.options.effect?this.$element.one($.support.transition.end,$.proxy(this.hideDialog,this)).emulateTransitionEnd(300):this.hideDialog()},a.prototype.hideDialog=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),$(document.documentElement).removeClass("js-effect-"+e.options.effect),e.$element.trigger(s)})},a.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},a.prototype.backdrop=function(e){var n=this.options.effect?"js-effect-fade":"";if(this.isShown&&this.options.backdrop){var r=$.support.transition&&n;this.$backdrop=$('<div class="js-backdrop '+n+'" />').appendTo(this.$element.parent()).emulateFixed(),this.$element.on(u,$.proxy(function(e){if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass(t);if(!e)return;r?this.$backdrop.one($.support.transition.end,e).emulateTransitionEnd(150):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass(t),$.support.transition&&this.options.effect?this.$backdrop.one($.support.transition.end,e).emulateTransitionEnd(150):e()):e&&e()},$.Dialog=a,$.fn.dialog=function(e,t){return this.each(function(){var n=$(this).emulateFixed(),r=n.data("dialog"),i=$.extend({},a.DEFAULTS,n.data(),typeof e=="object"&&e);r||(r=new a(this,i)),i.cache&&n.data("dialog",r),typeof e=="string"?r[e](t):i.show&&r.show(t)})},$(document).on(o+".dialog.data-api",'[data-toggle="dialog"]',function(e){var t=$(this),n=$(t.attr("data-target")),r=n.data("dialog")?"toggle":$.extend({},n.data(),t.data());t.is("a")&&e.preventDefault(),n.dialog(r,this)})}),define("spinner",["./event","./data"],function(){function i(n){var i=["spinner",n].join("-"),s,o;if(!e[i]){var u=[];for(var a=0;a<n;a++)s=a/n*100,o=a/n*360,a==0&&u.push("@"+t+"keyframes "+i+"{"),u.push(s+"% {"+t+"transform:rotate("+o+"deg)}"),a==n-1&&u.push("}");r.insertRule(u.join("\n"),r.cssRules.length),e[i]=1}return i}function s(e,t){this.$element=$(e),this.options=t}var e={},t="-webkit-",n=window.devicePixelRatio||1,r=function(){var e=$("<style />",{type:"text/css"});return $("head").append(e),e[0].sheet}();s.DEFAULTS={show:!0,sqr:30,duration:1.6,lines:12,color:"158,158,158",offset:{inner:6,outer:9},width:2,className:"js-spinner",wrapper:{top:"50%",left:"50%",position:"absolute","z-index":2e9}},s.prototype.toggle=function(){return this[this.isShown?"hide":"show"]()},s.prototype.show=function(){var e=$.Event("show.spinner");this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;this.isShown=!0,this.$wrap||this.draw(),this.$wrap.show()},s.prototype.hide=function(){var e=$.Event("hide.spinner");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=!1,this.$wrap&&this.$wrap.hide()},s.prototype.draw=function(){var e=this.options,r=this.$element,s=e.lines,o,u=$('<div class="'+e.className+'" />');this.$wrap=u;if(!e.sqr){var a=r.width(),f=r.height();e.sqr=Math.round(a>=f?f:a)}var l=e.sqr*n,c=l/2,h=e.offset.inner*n||c*(1/3),p=e.offset.outer*n||c*(2/3),d=e.width*n;e.wrapper[t+"transform"]="translate3d(-50%, -50%, 0) scale("+1/n+")",u.css(e.wrapper);var v=$("<canvas />").attr({width:l,height:l});v[0].getContext&&(o=v[0].getContext("2d"),o.translate(c,c),o.lineWidth=d||Math.ceil(l*.025),o.lineCap="round"),o.clearRect(c*-1,c*-1,l,l);for(var m=0;m<s;m++)o.rotate(Math.PI*2/s),o.strokeStyle="rgba("+e.color+","+(m<.25*s?.25:m/s)+")",o.beginPath(),o.moveTo(0,h),o.lineTo(0,p),o.stroke();var g={};g[t+"animation"]=i(s)+" "+e.duration+"s step-start infinite",v.css(g),u.append(v).appendTo(r)},$.Spinner=s,$.fn.spinner=function(e){return this.each(function(){var t=$(this),n=t.data("spinner"),r=$.extend({},s.DEFAULTS,t.data(),typeof e=="object"&&e);n||(n=new s(this,r),t.data("spinner",n)),typeof e=="string"?n[e]():r.show&&n.show()})}}),define("requestAnimationFrame",[],function(){(function(){var e=0,t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),s=window.setTimeout(function(){t(r+i)},i);return e=r+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})()}),define("carousel",["./event","./data","./touch","./transition","./requestAnimationFrame"],function(){function n(e,t){this.$element=$(e),this.$indicators=this.$element.find(".ui-carousel-indicators"),this.options=t,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.swipeable()}var e="js-active",t="slid:carousel";n.DEFAULTS={interval:5e3,wrap:!0},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),this},n.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".ui-carousel-item."+e),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},n.prototype.to=function(e){var n=this,r=this.getActiveIndex();if(e>this.$items.length-1||e<0)return;return this.sliding?this.$element.one(t,function(){n.to(e)}):r==e?this.pause().cycle():this.slide(e>r?"next":"prev",$(this.$items[e]))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".js-next, .js-prev").length&&$.support.transition&&(this.$element.trigger($.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(this.sliding)return;return this.slide("next")},n.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")},n.prototype.slide=function(n,r){var i=this.$element.find(".ui-carousel-item."+e),s=r||i[n](),o=n=="next"?"left":"right",u=n=="next"?"first":"last",a=this;if(!s.length){if(!this.options.wrap)return;s=this.$element.find(".ui-carousel-item")[u]()}if(s.hasClass(e))return this.sliding=!1;var f=$.Event(t,{relatedTarget:s[0],direction:o});this.$element.trigger(f);if(f.isDefaultPrevented())return;this.sliding=!0,this.pause(),this.$indicators.length&&(this.$indicators.find("."+e).removeClass(e),this.$element.one(t,function(){var t=$(a.$indicators.children()[a.getActiveIndex()]);t&&t.addClass(e)}));if($.support.transition&&this.$element.hasClass("js-slide")&&!this.swiping){var l="js-"+o,c="js-"+n;s.addClass(c),s[0].offsetWidth,i.addClass(l),s.addClass(l),i.one($.support.transition.end,function(){s.removeClass([c,l].join(" ")).addClass(e),i.removeClass([e,l].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger(t)},0)}).emulateTransitionEnd(i.css("transition-duration").slice(0,-1)*1e3)}else i.removeClass(e),s.addClass(e),this.sliding=!1,this.$element.trigger(t);this.cycle(),this.$center=s;var h=function(){var e=s[n]();if(!e.length){if(!a.options.wrap)return;e=a.$element.find(".ui-carousel-item")[u]()}return e}();return this.$left=n=="next"?i:h,this.$right=n=="next"?h:i,this},n.prototype.swipeable=function(){function g(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function y(){var e,t,r,i;e=Date.now(),t=e-h,h=e,r=n-c,c=n,i=800*r/(1+t),l=.8*i+.2*l}function b(e){n=e,e=-Math.round(e),Math.abs(e)>r&&(e=e<0?-r:r),m.$left[0].style[o]="translate3d("+(e-r)+"px, 0, 0)",m.$center[0].style[o]="translate3d("+e+"px, 0, 0)",m.$right[0].style[o]="translate3d("+(e+r)+"px, 0, 0)"}function w(){var e,t;if(a){e=Date.now()-h,t=a*Math.exp(-e/s);if(t>10||t<-10)return b(f-t),requestAnimationFrame(w);b(0),m.cycle(),[m.$left,m.$right].forEach(function(e){e[0].style[o]="translate3d(0, 0, 0)",e.removeClass("js-show")}),d&&m.slide(v),m.swiping=!1}}var t=this.$element.find(".ui-carousel-item."+e);this.$center=t,this.$left=this.$element.find(".ui-carousel-item").last(),this.$right=t.next();var n=0,r=window.innerWidth,i=!1,s=125,o="webkitTransform",u,a,f,l,c,h,p,d=!1,v="",m=this;this.$element.on("touchstart",function(t){return m.sliding||(i=!0,u=g(t),l=a=0,c=n,h=Date.now(),clearInterval(p),p=setInterval(y,100),m.pause(),m.$left.addClass("js-show"),m.$right.addClass("js-show")),t.preventDefault(),t.stopPropagation(),!1}),this.$element.on("touchmove",function(t){var r,s;if(i){r=g(t),s=u-r;if(s>2||s<-2)u=r,b(n+s)}return t.preventDefault(),t.stopPropagation(),!1}),this.$element.on("touchend",function(t){if(!m.sliding){i=!1,clearInterval(p),f=n;if(l>10||l<-10)a=1.2*l,f=n+a;f=Math.round(f/r)*r,f=f<-r?-r:f>r?r:f,a=f-n,h=Date.now(),m.swiping=!0,d=f!==0,v=n>0?"next":"prev",w()}return t.preventDefault(),t.stopPropagation(),!1})},$.Carousel=n,$.fn.carousel=function(e){return this.each(function(){var t=$(this),r=t.data("carousel"),i=$.extend({},n.DEFAULTS,t.data(),typeof e=="object"&&e),s=typeof e=="string"?e:i.slide;r||t.data("carousel",r=new n(this,i)),typeof e=="number"?r.to(e):s?r[s]():i.interval&&r.pause().cycle()})}}),define("debounce",["./zepto"],function(){$.debounce=function(e,t,n){var r;return!1!==n&&(n=!0),function(){function u(){n||e.apply(s,o),r=null}var s=this,o=arguments;r?clearTimeout(r):n&&e.apply(s,o),r=setTimeout(u,t||100)}}}),define("lazyload",["./debounce","./event"],function(){function r(t,n){this.elements=t,this.options=n,this.handler=n.handler,this.container=n.container,this.$container=$(n.container),this.onScroll=e($.proxy(this.onScroll,this),n.defer,!1),this.onResize=e($.proxy(this.onResize,this),n.defer,!1)}var e=$.debounce,t=0,n={};r.DEFAULTS={start:!0,attribute:"data-lazy",defer:300,handler:function(e,t){e.setAttribute("src",t)},container:window},r.prototype={start:function(){this.status=1,setTimeout(function(){this.inited||(this.inited=!0,this.containerHeight=this.getContainerHeight(),$(window).on("resize",this.onResize),this.$container.on("scroll",this.onScroll)),this.onScroll()}.bind(this),this.options.defer)},add:function(e){e=$(e).get(),this.elements=this.elements.concat(e)},getContainerHeight:function(){var e=this.container;if(e.document)return window.innerHeight;var t=window.getComputedStyle(e);return parseInt(t.height)+parseInt(t.paddingTop)+parseInt(t.paddingBottom)+parseInt(t.marginTop)+parseInt(t.marginBottom)},onResize:function(e){if(!this.status)return;this.containerHeight=this.getContainerHeight(),n={},this.onScroll()},onScroll:function(e){if(!this.status)return;var n=this.elements,r,i;for(var s=0,o=n.length;s<o;s++)r=n[s],r.cacheId=r.cacheId||++t,r&&this.elementInViewport(r)&&((i=r.lazyData)||(i=r.getAttribute(this.options.attribute),r.lazyData=i),i&&this.handler(r,i),n.splice(s,1,null));this.elements=n.filter(function(e){return e})},elementInViewport:function(e){var t=this.container,r=e.cacheId,i=n[r]||$(e).offset(),s=this.containerHeight;return t.document?s+=t.scrollY||t.pageYOffset:s+=(t.scrollTop||window.scrollY)+(t.offsetTop||window.pageYOffset),n[r]=i,i.top>=0&&i.top<=s||i.bottom>=0&&i.bottom<=s},pause:function(){this.status=0},destory:function(){this.$container.off("scroll",this.onScroll),$(window).off("resize",this.onResize),n={},this.status=0,this.elements=null,this.container=null,this.$container=null}},$.LazyLoad=r,$.fn.lazyload=function(e){var t=this.get(),n=$.extend({},r.DEFAULTS,typeof e=="object"&&e),i=$(n.container);n.container=i[0];var s=i.data("lazyload");return s||(s=new r(t,n),i.data("lazyload",s)),typeof e=="string"?s[e]():n.start&&s.start(),s}}),define("ajax",["./zepto"],function(){(function($){function triggerAndReturn(e,t,n){var r=$.Event(t);return $(e).trigger(r,n),!r.isDefaultPrevented()}function triggerGlobal(e,t,n,r){if(e.global)return triggerAndReturn(t||document,n,r)}function ajaxStart(e){e.global&&$.active++===0&&triggerGlobal(e,null,"ajaxStart")}function ajaxStop(e){e.global&&!--$.active&&triggerGlobal(e,null,"ajaxStop")}function ajaxBeforeSend(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===!1||triggerGlobal(t,n,"ajaxBeforeSend",[e,t])===!1)return!1;triggerGlobal(t,n,"ajaxSend",[e,t])}function ajaxSuccess(e,t,n,r){var i=n.context,s="success";n.success.call(i,e,s,t),r&&r.resolveWith(i,[e,s,t]),triggerGlobal(n,i,"ajaxSuccess",[t,n,e]),ajaxComplete(s,t,n)}function ajaxError(e,t,n,r,i){var s=r.context;r.error.call(s,n,t,e),i&&i.rejectWith(s,[n,t,e]),triggerGlobal(r,s,"ajaxError",[n,r,e||t]),ajaxComplete(t,n,r)}function ajaxComplete(e,t,n){var r=n.context;n.complete.call(r,t,e),triggerGlobal(n,r,"ajaxComplete",[t,n]),ajaxStop(n)}function empty(){}function mimeToDataType(e){return e&&(e=e.split(";",2)[0]),e&&(e==htmlType?"html":e==jsonType?"json":scriptTypeRE.test(e)?"script":xmlTypeRE.test(e)&&"xml")||"text"}function appendQuery(e,t){return t==""?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function serializeData(e){e.processData&&e.data&&$.type(e.data)!="string"&&(e.data=$.param(e.data,e.traditional)),e.data&&(!e.type||e.type.toUpperCase()=="GET")&&(e.url=appendQuery(e.url,e.data),e.data=undefined)}function parseArguments(e,t,n,r){return $.isFunction(t)&&(r=n,n=t,t=undefined),$.isFunction(n)||(r=n,n=undefined),{url:e,data:t,success:n,dataType:r}}function serialize(e,t,n,r){var i,s=$.isArray(t),o=$.isPlainObject(t);$.each(t,function(t,u){i=$.type(u),r&&(t=n?r:r+"["+(o||i=="object"||i=="array"?t:"")+"]"),!r&&s?e.add(u.name,u.value):i=="array"||!n&&i=="object"?serialize(e,u,n,t):e.add(t,u)})}var jsonpID=0,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;$.active=0,$.ajaxJSONP=function(e,t){if("type"in e){var n=e.jsonpCallback,r=($.isFunction(n)?n():n)||"jsonp"+ ++jsonpID,i=document.createElement("script"),s=window[r],o,u=function(e){$(i).triggerHandler("error",e||"abort")},a={abort:u},f;return t&&t.promise(a),$(i).on("load error",function(n,u){clearTimeout(f),$(i).off().remove(),n.type=="error"||!o?ajaxError(null,u||"error",a,e,t):ajaxSuccess(o[0],a,e,t),window[r]=s,o&&$.isFunction(s)&&s(o[0]),s=o=undefined}),ajaxBeforeSend(a,e)===!1?(u("abort"),a):(window[r]=function(){o=arguments},i.src=e.url.replace(/\?(.+)=\?/,"?$1="+r),document.head.appendChild(i),e.timeout>0&&(f=setTimeout(function(){u("timeout")},e.timeout)),a)}return $.ajax(e)},$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},$.ajax=function(options){var settings=$.extend({},options||{}),deferred=$.Deferred&&$.Deferred();for(key in $.ajaxSettings)settings[key]===undefined&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings),settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host),settings.url||(settings.url=window.location.toString()),serializeData(settings),settings.cache===!1&&(settings.url=appendQuery(settings.url,"_="+Date.now()));var dataType=settings.dataType,hasPlaceholder=/\?.+=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder)return hasPlaceholder||(settings.url=appendQuery(settings.url,settings.jsonp?settings.jsonp+"=?":settings.jsonp===!1?"":"callback=?")),$.ajaxJSONP(settings,deferred);var mime=settings.accepts[dataType],headers={},setHeader=function(e,t){headers[e.toLowerCase()]=[e,t]},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),nativeSetHeader=xhr.setRequestHeader,abortTimeout;deferred&&deferred.promise(xhr),settings.crossDomain||setHeader("X-Requested-With","XMLHttpRequest"),setHeader("Accept",mime||"*/*");if(mime=settings.mimeType||mime)mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime);(settings.contentType||settings.contentType!==!1&&settings.data&&settings.type.toUpperCase()!="GET")&&setHeader("Content-Type",settings.contentType||"application/x-www-form-urlencoded");if(settings.headers)for(name in settings.headers)setHeader(name,settings.headers[name]);xhr.setRequestHeader=setHeader,xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty,clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||xhr.status==304||xhr.status==0&&protocol=="file:"){dataType=dataType||mimeToDataType(settings.mimeType||xhr.getResponseHeader("content-type")),result=xhr.responseText;try{dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&&(result=blankRE.test(result)?null:$.parseJSON(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings,deferred):ajaxSuccess(result,xhr,settings,deferred)}else ajaxError(xhr.statusText||null,xhr.status?"error":"abort",xhr,settings,deferred)}};if(ajaxBeforeSend(xhr,settings)===!1)return xhr.abort(),ajaxError(null,"abort",xhr,settings,deferred),xhr;if(settings.xhrFields)for(name in settings.xhrFields)xhr[name]=settings.xhrFields[name];var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async,settings.username,settings.password);for(name in headers)nativeSetHeader.apply(xhr,headers[name]);return settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings,deferred)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr},$.get=function(){return $.ajax(parseArguments.apply(null,arguments))},$.post=function(){var e=parseArguments.apply(null,arguments);return e.type="POST",$.ajax(e)},$.getJSON=function(){var e=parseArguments.apply(null,arguments);return e.dataType="json",$.ajax(e)},$.fn.load=function(e,t,n){if(!this.length)return this;var r=this,i=e.split(/\s/),s,o=parseArguments(e,t,n),u=o.success;return i.length>1&&(o.url=i[0],s=i[1]),o.success=function(e){r.html(s?$("<div>").html(e.replace(rscript,"")).find(s):e),u&&u.apply(r,arguments)},$.ajax(o),this};var escape=encodeURIComponent;$.param=function(e,t){var n=[];return n.add=function(e,t){this.push(escape(e)+"="+escape(t))},serialize(n,e,t),n.join("&").replace(/%20/g,"+")}})(Zepto)}),define("pro",["./scrollfix","./tab","./dialog","./spinner","./carousel","./lazyload","./ajax"],function(){return $}),require(["./pro"],function(){function t(e){return(e*10>>0)/10}function n(e){for(var t in e)return!1;return!0}function r(t,n){var r=t[0];$(".dialoginuse").remove();var i=$(".dialogTemplate").clone();i.removeClass("dialogTemplate"),i.addClass("dialoginuse"),$(".dialogTemplate").after(i),i=$(".dialoginuse"),i.find(".ui-alert-title").text(n.title),i.find(".ui-alert-body p").text(n.body),t.data("target",".dialoginuse");var s=$.extend({},i.data(),t.data()),o=n.buttons;o.forEach(function(e){var t='<a data-dismiss="dialog" role="button" class="ui-alert-button">'+e.name+"</a>",n=$(t);e.callback&&n.on("tap",e.callback),i.find(".ui-alert-footer").append(n)}),t.is("a")&&e.preventDefault(),s.target=".dialoginuse",i.dialog(s,r)}function i(e){var t="<button></button>";r($(t),{title:"出错了555……",body:e,buttons:[{name:"确定"}]})}function s(){var e=$(document).width(),t=100/(e/100>>0)+"%";$(".item").css({width:t})}function o(e){var t=localStorage.cart||"{}";t=JSON.parse(t);var n=[];for(var r in t)n.push(r);if(n.length==0)return $(".order-load-info p").text("购物车中没有商品");$.getProductDetail(n,function(n,r){if(n)i("获取商品详情失败");else{var s=r.list,o=r.s_dir,u=$("#order-list-container ul"),f=u.children("li.template");s.forEach(function(e){var n=f.clone();n.addClass("jiu-single"),n.removeClass("template"),n.data("code",e.id),n.find(".jiu-detail").text(e.describe),n.find(".order-list-price").text(e.wechatPrice),n.find(".order-list-num").text(t[e.id].num),n.find("img").attr("src",o+e.littlePic),u.append(n),n.show()}),f.hide(),$(".order-load-info").hide(),$("#order-list-container").show(),$("#order-confirm-container").show(),a(t),e()}})}function u(e){$.post("/cash_voucher",function(t,n){if(n!="success")return $.uploadErrorLog("fail to request /getTicket"),e("fail");e(null,t)})}function a(e){u(function(n,r){n&&i("更新我的现金券失败");if(r){var s=$("#cart-ticket-left"),o=$("#cart-ticket-use"),u=$("#cart_total_cost"),a=r.cash,f=0;for(var l in e)f+=e[l].num*e[l].price;$.uploadErrorLog({cost:f},"cost"),a>=f?(o.text(t(f)),s.text(t(a-f)),u.text(0)):(o.text(t(a)),s.text(0),u.text(t(f-a)))}})}function f(e){$.post("/address",function(t,n){if(n!="success"){e("fail to get address");return}e(null,t)})}function l(e){$("li.j-single.j-address-item").remove();var t=$(".cart-address-list li.j-address-item-template"),n=$(".my-address-list li.j-address-item-template");f(function(r,s){r&&i("获取我的地址失败");if(!s)return i("获取我的地址失败");var o=[];localStorage.address=JSON.stringify(s),localStorage.defauleAddrIndex=0;for(var u=0;u<s.length;u++){var a=s[u],f=t.clone();f.removeClass("j-address-item-template").addClass("j-address-item"),f.data("index",u),f.find(".j-province").text(a.province||""),f.find(".j-shi").text(a.city||""),f.find(".j-qu").text(a.area||""),f.find(".j-lu").text(a.detail||""),f.find(".j-name").text(a.name||""),f.find(".j-tel").text(a.tel||""),u==0&&f.addClass("j-select"),f.show(),o.push(f)}var l=o.pop();while(l)$(".cart-address-list").prepend(l),l=o.pop();for(var u=0;u<s.length;u++){var a=s[u],f=n.clone();f.removeClass("j-address-item-template").addClass("j-address-item"),f.data("index",u),f.find(".j-province").text(a.province||""),f.find(".j-shi").text(a.city||""),f.find(".j-qu").text(a.area||""),f.find(".j-lu").text(a.detail||""),f.find(".j-name").text(a.name||""),f.find(".j-tel").text(a.tel||""),u==0&&f.addClass("j-default"),f.show(),o.push(f)}l=o.pop();while(l)$(".my-address-list").prepend(l),l=o.pop();e&&e()})}function c(){localStorage.cart="{}",$(".order-load-info p").text("购物车中没有商品"),$(".order-load-info").show(),$("#order-list-container ul .jiu-single").remove(),$("#order-list-container").hide(),$("#order-confirm-container").hide()}function h(){$.post("/cash_voucher",function(e,n){if(n!=="success")return $.uploadErrorLog({r:"fail to get cash"},"cash_voucher"),i("网络故障，稍后重试");var r=e.cash;$("#my_cash_num").text(t(r)),$("#my_cash_num").data("to",r)})}function p(e){$(".my-order-item").remove();var t=$(".order-processing.template"),n=$(".order-complete.template"),r=t.parent(),i=[],s=[];!e||e.length==0?r.append("<p class='no-order-info'>还没有订单哦:)</p>"):$(".no-order-info").remove(),e.forEach(function(e){var r=n.clone();if(e.status==0)var r=t.clone();r.removeClass("template"),r.addClass("my-order-item"),r.find(".order-id").text(e.orderID),r.find(".order-time").text(e.time);var o=r.find("li.jiu-single"),u=r.find("ul.jiu-li");e.wines.forEach(function(e){var t=o.clone();t.find(".jiu-detail").text(e.describe),t.find(".order-list-price").text(e.wechatPrice),t.find(".order-list-num").text(e.number),t.find("img").attr("src",e.littlePic),u.append(t)}),o.remove(),r.show(),e.status==0?i.push(r):s.push(r)});var o=s.pop();while(o)r.prepend(o),o=s.pop();o=i.pop();while(o)r.prepend(o),o=i.pop();t.hide(),n.hide()}function d(){$.post("/getuserorder",function(e,t){if(t!="success"){alert("fail to getuserorder");return}p(e)})}function v(){var e={province:"安徽",city:"阜阳",area:$("#distinct_list").val(),detail:$("#addr-detail-input").val(),name:$("#addr-name-input").val(),tel:$("#addr-tel-input").val()},t=/^0?1[3|4|5|7|8][0-9]{9}$/;if(e.area=="请选择一个区")return alert("请选择一个区");if(e.detail.length==0)return alert("详细地址不能为空");if(e.name.length==0)return alert("姓名不能为空");if(!t.test(e.tel))return alert("请输入11位长度的手机号码");$.post("/add_address",{address:e},function(e,t){if(t!="success"){i("添加地址出错:(");return}e.error?i(e.message):($(".ui-tab.page5 a").trigger("tap"),l())})}$.tempStorage={},$('[data-toggle="tab"]').on("shown:tab",function(e){var t=e.target,n=e.relatedTarget,r=t.innerText.trim().toLowerCase();if(t.inited)return;r=="carousel"&&$('[data-ride="carousel"]').each(function(){var e=$(this);e.carousel(e.data())}),t.inited=!0}),$("[data-lazy]").lazyload({container:$.os.ios>5?$(".ui-page.page1"):window}),$(document).ready(function(e){var t=e.target;$('[data-ride="carousel"]').each(function(){var e=$(this);e.carousel(e.data())})}),$('[data-target=".page5"]').on("tap",function(){$(".ui-tab.page5 a").data("target",$(this).data("from"))}),$(document).on("tap",'[data-toggle="mytab"]',function(){$(this).tab("show")}),s(),$(window).resize(s),$(".my-top-bar").on("tap",function(){var e=$(this),t=e.data("target").split("-")[1];t=="page1"&&(location.href="/?r=home"),t=="page2"&&(location.href="/?r=shopcart")}),localStorage.cart&&localStorage.cart!="{}"&&($("#topbar-cart-reddot").show(),$("#bottombar-cart-reddot").show()),$.uploadErrorLog=function(e,t){$.post("/errlog?from="+t,{r:e})},$.getProductDetail=function(e,t){$.post("/getProduct",{r:e},function(e,n){if(n!="success"){i("获取购物车失败");return}$.uploadErrorLog(e);var r=e.list;t(null,e)})},o(function(){$(".jiu-li .jiu-single").on("tap",function(){$.tempStorage.cartListTap=$(this)})}),$("#as_cart_change_num").on("tap",function(){}),$("#as_cart_move_collect").on("tap",function(){}),$("#as_cart_delete").on("tap",function(){var e=JSON.parse(localStorage.cart);$.uploadErrorLog(e),delete e[$.tempStorage.cartListTap.data("code")],localStorage.cart=JSON.stringify(e),$.tempStorage.cartListTap.remove();if(!n(e)){a(e);return}$("#order-confirm-container").hide(),$("#order-list-container").hide(),$(".order-load-info p").text("购物车中没有商品"),$(".order-load-info").show()}),$("#as_cart_view_detail").on("tap",function(){var e=$.tempStorage.cartListTap.data("code"),t=JSON.parse(localStorage.cart)[e].num;location.href="/details?code="+e+"&num="+t}),$(document).on("tap",".page4 .j-single",function(){$(this).parent().find(".j-single").removeClass("j-select"),$(this).toggleClass("j-select"),localStorage.defauleAddrIndex=$(this).data("index")}),$(document).on("tap",".my-address-list li.j-address-item",function(){$.tempStorage.tapAddressItem=$(this)}),$("#addressActionsheet ul li").on("tap",function(){var e={setDefault:function(e){$.post("/set_default_address",{index:e.data("index")},function(t,n){if(n!=="success")return $.uploadErrorLog({r:"fail to set default address"},"delete_address"),alert("网络故障，稍后重试");localStorage.defauleAddrIndex=e.data("index"),$(".j-address-item.j-default").removeClass("j-default"),e.addClass("j-default")})},"delete":function(e){$.post("/delete_address",{index:e.data("index")},function(t,n){e.remove(),l()})}};e[$(this).data("action")]($.tempStorage.tapAddressItem)}),l(),$(document).on("tap","#cart_confirm",function(){var e={};e.shopOnce=[];var t=JSON.parse(localStorage.cart);for(var n in t)e.shopOnce.push({id:n,number:t[n].num});e.cashUse=parseFloat($("#cart-ticket-use").text()),e.voucherUse=0,e.totalPrice=parseFloat($("#cart_total_cost").text()),localStorage.purchase=JSON.stringify(e),$("#complete_cash_pay").removeAttr("disabled","disabled")}),$("#finalConfirmButton").on("tap",function(){var e=JSON.parse(localStorage.purchase),t=JSON.parse(localStorage.address),n=parseInt(localStorage.defauleAddrIndex);e.address=t[n],e.confirmTel="",localStorage.purchase=JSON.stringify(e),$.post("/purchase",e,function(e,t){if(t!="success"){$.uploadErrorLog("post /purchase error");return}c(),d(),h(),$('.ui-bottom-bar-button[data-target=".page3"]').trigger("tap"),$('.ui-button[data-target="#page3-tab1"]').trigger("tap")})}),$("#complete_cash_pay").on("tap",function(){var e=this,t=localStorage.address?JSON.parse(localStorage.address):[];if(!t||t.length==0)return r($(this),{title:"地址不能为空",body:"您还没有添加地址，请先添加地址",buttons:[{name:"确定"}]});$(this).attr("disabled","disabled"),r($(this),{title:"确认下单",body:"快递即将免费送货上门，如有问题请与客服联系",buttons:[{name:"确认",callback:function(){var e=JSON.parse(localStorage.purchase),t=JSON.parse(localStorage.address),n=parseInt(localStorage.defauleAddrIndex);e.address=t[n],e.confirmTel="",localStorage.purchase=JSON.stringify(e),$("body").spinner("show"),$.post("/purchase",e,function(e,t){$("body").spinner("hide");if(t!="success"){$.uploadErrorLog("post /purchase error"),i("下单失败，请重试");return}c(),d(),h(),$('.ui-bottom-bar-button[data-target=".page3"]').trigger("tap"),$('.ui-button[data-target="#page3-tab1"]').trigger("tap")})}},{name:"取消",callback:function(){$(e).removeAttr("disabled","disabled")}}]})}),h(),d(),$(".address-btn-ok").on("tap",function(){this.disabled=!0,v()}),$(".addr-form").on("change",function(){$(".address-btn-ok").prop("disabled",!1)})}),define("index",function(){});